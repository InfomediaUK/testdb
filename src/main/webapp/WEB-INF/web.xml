<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
         xmlns="http://java.sun.com/xml/ns/javaee" 
         xmlns:jsp="http://java.sun.com/xml/ns/javaee/jsp" 
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" 
         version="3.0">
  <display-name>MMJ</display-name>
  <context-param>
    <param-name>webAppRootKey</param-name>
    <param-value>mmj.webapp.root</param-value>
  </context-param>
  <context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/applicationContext.xml</param-value>
  </context-param>
  <!-- Lyndon. Got rid of this when we started using log4j2 01/10/2016. 
  <context-param>
    <param-name>log4jConfigLocation</param-name>
    <param-value>/WEB-INF/log4j.properties</param-value>
  </context-param>
  -->
  <context-param>
    <param-name>numberOfExecutors</param-name>
    <param-value>5</param-value>
  </context-param>
  <filter>
    <filter-name>CharsetFilter</filter-name>
    <filter-class>com.helmet.application.filter.CharsetFilter</filter-class>
    <init-param>
      <param-name>requestEncoding</param-name>
      <param-value>UTF-8</param-value>
    </init-param>
  </filter>
  <filter>
    <filter-name>JAMonFilter</filter-name>
    <filter-class>com.jamonapi.JAMonFilter</filter-class>
  </filter>
  <filter-mapping>
    <filter-name>JAMonFilter</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>
  <filter>
    <filter-name>AdminLoginFilter</filter-name>
    <filter-class>com.helmet.application.admin.filter.LoginFilter</filter-class>
    <init-param>
      <param-name>loginPage</param-name>
      <param-value>/adminLogin.do</param-value>
    </init-param>
  </filter>
  <filter>
    <filter-name>AdminSecretWordFilter</filter-name>
    <filter-class>com.helmet.application.admin.filter.SecretWordFilter</filter-class>
    <init-param>
      <param-name>loginPage</param-name>
      <param-value>/adminSecretWord.do</param-value>
    </init-param>
  </filter>
  <filter>
    <filter-name>AdminCheckPwdFilter</filter-name>
    <filter-class>com.helmet.application.admin.filter.CheckPwdFilter</filter-class>
    <init-param>
      <param-name>loginPage</param-name>
      <param-value>/admin/changePassword.do</param-value>
    </init-param>
    <init-param>
      <param-name>ignorePattern1</param-name>
      <param-value>/admin/changeSecretWord.do</param-value>
    </init-param>
    <init-param>
      <param-name>ignorePattern2</param-name>
      <param-value>/admin/site.css</param-value>
    </init-param>
    <init-param>
      <param-name>ignorePattern3</param-name>
      <param-value>/admin/site.js</param-value>
    </init-param>
    <init-param>
      <param-name>ignorePattern4</param-name>
      <param-value>/admin/images/trans.gif</param-value>
    </init-param>
    <init-param>
      <param-name>ignorePattern5</param-name>
      <param-value>/admin/changePasswordProcess.do</param-value>
    </init-param>
    <init-param>
      <param-name>ignorePattern6</param-name>
      <param-value>/admin/changeSecretWordProcess.do</param-value>
    </init-param>
    <init-param>
      <param-name>ignorePattern7</param-name>
      <param-value>/admin/changeSecretWordProcess2.do</param-value>
    </init-param>
  </filter>
  <filter>
    <filter-name>AdminCheckSecretWordFilter</filter-name>
    <filter-class>com.helmet.application.admin.filter.CheckSecretWordFilter</filter-class>
    <init-param>
      <param-name>loginPage</param-name>
      <param-value>/admin/changeSecretWord.do</param-value>
    </init-param>
    <init-param>
      <param-name>ignorePattern1</param-name>
      <param-value>/admin/changePassword.do</param-value>
    </init-param>
    <init-param>
      <param-name>ignorePattern2</param-name>
      <param-value>/admin/site.css</param-value>
    </init-param>
    <init-param>
      <param-name>ignorePattern3</param-name>
      <param-value>/admin/site.js</param-value>
    </init-param>
    <init-param>
      <param-name>ignorePattern4</param-name>
      <param-value>/admin/images/trans.gif</param-value>
    </init-param>
    <init-param>
      <param-name>ignorePattern5</param-name>
      <param-value>/admin/changeSecretWordProcess.do</param-value>
    </init-param>
    <init-param>
      <param-name>ignorePattern6</param-name>
      <param-value>/admin/changeSecretWordProcess2.do</param-value>
    </init-param>
    <init-param>
      <param-name>ignorePattern7</param-name>
      <param-value>/admin/changePasswordProcess.do</param-value>
    </init-param>
  </filter>
  <filter>
    <filter-name>AdminAccessFilter</filter-name>
    <filter-class>com.helmet.application.admin.filter.AccessFilter</filter-class>
    <init-param>
      <param-name>urlPattern</param-name>
      <param-value>/admin</param-value>
    </init-param>
    <init-param>
      <param-name>accessDeniedPage</param-name>
      <param-value>/admin/accessDenied.jsp</param-value>
    </init-param>
  </filter>
  <filter>
    <filter-name>AdminPwdFilter</filter-name>
    <filter-class>com.helmet.application.admin.filter.PwdFilter</filter-class>
    <init-param>
      <param-name>loginPage</param-name>
      <param-value>/admin/reEnterPwd.do</param-value>
    </init-param>
  </filter>
  <filter>
    <filter-name>AgyLoginFilter</filter-name>
    <filter-class>com.helmet.application.agy.filter.LoginFilter</filter-class>
    <init-param>
      <param-name>loginPage</param-name>
      <param-value>/agyLogin.do</param-value>
    </init-param>
  </filter>
  <filter>
    <filter-name>AgySecretWordFilter</filter-name>
    <filter-class>com.helmet.application.agy.filter.SecretWordFilter</filter-class>
    <init-param>
      <param-name>loginPage</param-name>
      <param-value>/agySecretWord.do</param-value>
    </init-param>
  </filter>
  <filter>
    <filter-name>AgyCheckPwdFilter</filter-name>
    <filter-class>com.helmet.application.agy.filter.CheckPwdFilter</filter-class>
    <init-param>
      <param-name>loginPage</param-name>
      <param-value>/agy/changePassword.do</param-value>
    </init-param>
    <init-param>
      <param-name>ignorePattern1</param-name>
      <param-value>/agy/changeSecretWord.do</param-value>
    </init-param>
    <init-param>
      <param-name>ignorePattern2</param-name>
      <param-value>/agy/site.css</param-value>
    </init-param>
    <init-param>
      <param-name>ignorePattern3</param-name>
      <param-value>/agy/site.js</param-value>
    </init-param>
    <init-param>
      <param-name>ignorePattern4</param-name>
      <param-value>/agy/images/trans.gif</param-value>
    </init-param>
    <init-param>
      <param-name>ignorePattern5</param-name>
      <param-value>/agy/changePasswordProcess.do</param-value>
    </init-param>
    <init-param>
      <param-name>ignorePattern6</param-name>
      <param-value>/agy/changeSecretWordProcess.do</param-value>
    </init-param>
    <init-param>
      <param-name>ignorePattern7</param-name>
      <param-value>/agy/changeSecretWordProcess2.do</param-value>
    </init-param>
  </filter>
  <filter>
    <filter-name>AgyCheckSecretWordFilter</filter-name>
    <filter-class>com.helmet.application.agy.filter.CheckSecretWordFilter</filter-class>
    <init-param>
      <param-name>loginPage</param-name>
      <param-value>/agy/changeSecretWord.do</param-value>
    </init-param>
    <init-param>
      <param-name>ignorePattern1</param-name>
      <param-value>/agy/changePassword.do</param-value>
    </init-param>
    <init-param>
      <param-name>ignorePattern2</param-name>
      <param-value>/agy/site.css</param-value>
    </init-param>
    <init-param>
      <param-name>ignorePattern3</param-name>
      <param-value>/agy/site.js</param-value>
    </init-param>
    <init-param>
      <param-name>ignorePattern4</param-name>
      <param-value>/agy/images/trans.gif</param-value>
    </init-param>
    <init-param>
      <param-name>ignorePattern5</param-name>
      <param-value>/agy/changeSecretWordProcess.do</param-value>
    </init-param>
    <init-param>
      <param-name>ignorePattern6</param-name>
      <param-value>/agy/changeSecretWordProcess2.do</param-value>
    </init-param>
    <init-param>
      <param-name>ignorePattern7</param-name>
      <param-value>/agy/changePasswordProcess.do</param-value>
    </init-param>
  </filter>
  <filter>
    <filter-name>AgyAccessFilter</filter-name>
    <filter-class>com.helmet.application.agy.filter.AccessFilter</filter-class>
    <init-param>
      <param-name>urlPattern</param-name>
      <param-value>/agy</param-value>
    </init-param>
    <init-param>
      <param-name>accessDeniedPage</param-name>
      <param-value>/agy/accessDenied.jsp</param-value>
    </init-param>
  </filter>
  <filter>
    <filter-name>AgyPwdFilter</filter-name>
    <filter-class>com.helmet.application.agy.filter.PwdFilter</filter-class>
    <init-param>
      <param-name>loginPage</param-name>
      <param-value>/agy/reEnterPwd.do</param-value>
    </init-param>
  </filter>
  <filter>
    <filter-name>AppLoginFilter</filter-name>
    <filter-class>com.helmet.application.app.filter.LoginFilter</filter-class>
    <init-param>
      <param-name>loginPage</param-name>
      <param-value>/appLogin.do</param-value>
    </init-param>
    <init-param>
      <param-name>loginQueryStringPattern</param-name>
      <param-value>^(login)=([0-9]+)\-([0-9]+)</param-value>
    </init-param>
    <init-param>
      <param-name>bookingGradeApplicantIdGroup</param-name>
      <param-value>2</param-value>
    </init-param>
  </filter>
  <filter>
    <filter-name>AppSecretWordFilter</filter-name>
    <filter-class>com.helmet.application.app.filter.SecretWordFilter</filter-class>
    <init-param>
      <param-name>loginPage</param-name>
      <param-value>/appSecretWord.do</param-value>
    </init-param>
  </filter>
  <filter>
    <filter-name>AppCheckSecretWordFilter</filter-name>
    <filter-class>com.helmet.application.app.filter.CheckSecretWordFilter</filter-class>
    <init-param>
      <param-name>loginPage</param-name>
      <param-value>/app/changeSecretWord.do</param-value>
    </init-param>
    <init-param>
      <param-name>ignorePattern1</param-name>
      <param-value>/app/site.css</param-value>
    </init-param>
    <init-param>
      <param-name>ignorePattern2</param-name>
      <param-value>/app/site.js</param-value>
    </init-param>
    <init-param>
      <param-name>ignorePattern3</param-name>
      <param-value>/app/images/trans.gif</param-value>
    </init-param>
    <init-param>
      <param-name>ignorePattern4</param-name>
      <param-value>/app/changeSecretWordProcess.do</param-value>
    </init-param>
  </filter>
  <filter>
    <filter-name>ZapLoginFilter</filter-name>
    <filter-class>com.helmet.application.zap.filter.LoginFilter</filter-class>
    <init-param>
      <param-name>loginPage</param-name>
      <param-value>/zapLogin.do</param-value>
    </init-param>
  </filter>
  <filter>
    <filter-name>ZapCheckPwdFilter</filter-name>
    <filter-class>com.helmet.application.zap.filter.CheckPwdFilter</filter-class>
    <init-param>
      <param-name>loginPage</param-name>
      <param-value>/zap/changePassword.do</param-value>
    </init-param>
    <init-param>
      <param-name>ignorePattern1</param-name>
      <param-value>/zap/changeSecretWord.do</param-value>
    </init-param>
    <init-param>
      <param-name>ignorePattern2</param-name>
      <param-value>/zap/site.css</param-value>
    </init-param>
    <init-param>
      <param-name>ignorePattern3</param-name>
      <param-value>/zap/site.js</param-value>
    </init-param>
    <init-param>
      <param-name>ignorePattern4</param-name>
      <param-value>/zap/images/trans.gif</param-value>
    </init-param>
    <init-param>
      <param-name>ignorePattern5</param-name>
      <param-value>/zap/changePasswordProcess.do</param-value>
    </init-param>
    <init-param>
      <param-name>ignorePattern6</param-name>
      <param-value>/zap/changeSecretWordProcess.do</param-value>
    </init-param>
    <init-param>
      <param-name>ignorePattern7</param-name>
      <param-value>/zap/changeSecretWordProcess2.do</param-value>
    </init-param>
  </filter>
  <filter>
    <filter-name>ZapSecretWordFilter</filter-name>
    <filter-class>com.helmet.application.zap.filter.SecretWordFilter</filter-class>
    <init-param>
      <param-name>loginPage</param-name>
      <param-value>/zapSecretWord.do</param-value>
    </init-param>
  </filter>
  <filter>
    <filter-name>ZapCheckSecretWordFilter</filter-name>
    <filter-class>com.helmet.application.zap.filter.CheckSecretWordFilter</filter-class>
    <init-param>
      <param-name>loginPage</param-name>
      <param-value>/zap/changeSecretWord.do</param-value>
    </init-param>
    <init-param>
      <param-name>ignorePattern1</param-name>
      <param-value>/zap/site.css</param-value>
    </init-param>
    <init-param>
      <param-name>ignorePattern2</param-name>
      <param-value>/zap/site.js</param-value>
    </init-param>
    <init-param>
      <param-name>ignorePattern3</param-name>
      <param-value>/zap/images/trans.gif</param-value>
    </init-param>
    <init-param>
      <param-name>ignorePattern4</param-name>
      <param-value>/zap/changeSecretWordProcess.do</param-value>
    </init-param>
  </filter>
  <filter>
    <filter-name>ZapPwdFilter</filter-name>
    <filter-class>com.helmet.application.zap.filter.PwdFilter</filter-class>
    <init-param>
      <param-name>loginPage</param-name>
      <param-value>/zap/reEnterPwd.do</param-value>
    </init-param>
  </filter>
  <filter>
    <filter-name>ResponseOverrideFilter</filter-name>
    <filter-class>org.displaytag.filter.ResponseOverrideFilter</filter-class>
  </filter>
  <filter-mapping>
    <filter-name>CharsetFilter</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>
  <filter-mapping>
    <filter-name>AdminLoginFilter</filter-name>
    <url-pattern>/admin/*</url-pattern>
  </filter-mapping>
  <filter-mapping>
    <filter-name>AdminLoginFilter</filter-name>
    <url-pattern>/adminSecretWord.do</url-pattern>
  </filter-mapping>
  <filter-mapping>
    <filter-name>AdminSecretWordFilter</filter-name>
    <url-pattern>/admin/*</url-pattern>
  </filter-mapping>
  <filter-mapping>
    <filter-name>AdminAccessFilter</filter-name>
    <url-pattern>/admin/*</url-pattern>
  </filter-mapping>
  <filter-mapping>
    <filter-name>AdminCheckPwdFilter</filter-name>
    <url-pattern>/admin/*</url-pattern>
  </filter-mapping>
  <filter-mapping>
    <filter-name>AdminCheckSecretWordFilter</filter-name>
    <url-pattern>/admin/*</url-pattern>
  </filter-mapping>
  <filter-mapping>
    <filter-name>AgyLoginFilter</filter-name>
    <url-pattern>/agy/*</url-pattern>
  </filter-mapping>
  <filter-mapping>
    <filter-name>AgyLoginFilter</filter-name>
    <url-pattern>/agySecretWord.do</url-pattern>
  </filter-mapping>
  <filter-mapping>
    <filter-name>AgySecretWordFilter</filter-name>
    <url-pattern>/agy/*</url-pattern>
  </filter-mapping>
  <filter-mapping>
    <filter-name>AgyAccessFilter</filter-name>
    <url-pattern>/agy/*</url-pattern>
  </filter-mapping>
  <filter-mapping>
    <filter-name>AgyCheckPwdFilter</filter-name>
    <url-pattern>/agy/*</url-pattern>
  </filter-mapping>
  <filter-mapping>
    <filter-name>AgyCheckSecretWordFilter</filter-name>
    <url-pattern>/agy/*</url-pattern>
  </filter-mapping>
  <filter-mapping>
    <filter-name>AppLoginFilter</filter-name>
    <url-pattern>/app/*</url-pattern>
  </filter-mapping>
  <filter-mapping>
    <filter-name>AppSecretWordFilter</filter-name>
    <url-pattern>/app/*</url-pattern>
  </filter-mapping>
  <filter-mapping>
    <filter-name>AppCheckSecretWordFilter</filter-name>
    <url-pattern>/app/*</url-pattern>
  </filter-mapping>
  <filter-mapping>
    <filter-name>ZapLoginFilter</filter-name>
    <url-pattern>/zap/*</url-pattern>
  </filter-mapping>
  <filter-mapping>
    <filter-name>ZapSecretWordFilter</filter-name>
    <url-pattern>/zap/*</url-pattern>
  </filter-mapping>
  <filter-mapping>
    <filter-name>ZapCheckSecretWordFilter</filter-name>
    <url-pattern>/zap/*</url-pattern>
  </filter-mapping>
  <filter-mapping>
    <filter-name>ZapCheckPwdFilter</filter-name>
    <url-pattern>/zap/*</url-pattern>
  </filter-mapping>
  <filter-mapping>
    <filter-name>ResponseOverrideFilter</filter-name>
    <url-pattern>*.do</url-pattern>
  </filter-mapping>
  <filter-mapping>
    <filter-name>ResponseOverrideFilter</filter-name>
    <url-pattern>*.jsp</url-pattern>
  </filter-mapping>
  <listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
  </listener>
  <!-- Lyndon. Got rid of this when we started using log4j2 01/10/2016.
  <listener>
    <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class>
  </listener>
  -->
  <listener>
    <listener-class>com.helmet.application.ExecutorContextListener</listener-class>
  </listener>
  <servlet>
    <servlet-name>action</servlet-name>
    <servlet-class>com.helmet.application.MMJActionServlet</servlet-class>
    <init-param>
      <param-name>config</param-name>
      <param-value>/WEB-INF/struts-config-mmj.xml</param-value>
    </init-param>
    <init-param>
      <param-name>config/admin</param-name>
      <param-value>/WEB-INF/admin/struts-config-admin.xml</param-value>
    </init-param>
    <init-param>
      <param-name>config/agy</param-name>
      <param-value>/WEB-INF/agy/struts-config-agy.xml</param-value>
    </init-param>
    <init-param>
      <param-name>config/app</param-name>
      <param-value>/WEB-INF/app/struts-config-app.xml</param-value>
    </init-param>
    <init-param>
      <param-name>config/zap</param-name>
      <param-value>/WEB-INF/zap/struts-config-zap.xml</param-value>
    </init-param>
    <init-param> 
      <param-name>chainConfig</param-name> 
      <param-value>org/apache/struts/tiles/chain-config.xml</param-value> 
   </init-param>
   <init-param>
      <param-name>nocache</param-name>
      <param-value>true</param-value>
    </init-param>
    <init-param>
      <param-name>debug</param-name>
      <param-value>2</param-value>
    </init-param>
    <init-param>
      <param-name>detail</param-name>
      <param-value>2</param-value>
    </init-param>
    <load-on-startup>2</load-on-startup>
  </servlet>
  <servlet>
    <servlet-name>MMJJersey</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <init-param>
      <param-name>com.sun.jersey.config.property.packages</param-name>
      <param-value>com.helmet.jersey.resource</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>MMJJersey</servlet-name>
    <url-pattern>/rest/*</url-pattern>
  </servlet-mapping>
  <servlet>
    <servlet-name>SQLServlet</servlet-name>
    <servlet-class>com.helmet.reporting.SQLServlet</servlet-class>
    <init-param>
      <param-name>names</param-name>
      <param-value>noshow</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet>
    <servlet-name>pdfcreator</servlet-name>
    <servlet-class>com.helmet.servlet.PDFServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>pdfcreator</servlet-name>
    <url-pattern>/createpdf</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>SQLServlet</servlet-name>
    <url-pattern>/sql</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>action</servlet-name>
    <url-pattern>*.do</url-pattern>
  </servlet-mapping>
  <welcome-file-list>
    <welcome-file>home.do</welcome-file>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>index.html</welcome-file>
  </welcome-file-list>
  <error-page>
    <error-code>404</error-code>
    <location>/error404.do</location>
  </error-page>
  <error-page>
    <error-code>500</error-code>
    <location>/error500.do</location>
  </error-page>
  <jsp-config>
    <taglib>
      <taglib-uri>/mmj</taglib-uri>
      <taglib-location>/WEB-INF/tld/mmj.tld</taglib-location>
    </taglib>
    <taglib>
      <taglib-uri>/mmj-admin</taglib-uri>
      <taglib-location>/WEB-INF/tld/mmj-admin.tld</taglib-location>
    </taglib>
    <taglib>
      <taglib-uri>/mmj-agy</taglib-uri>
      <taglib-location>/WEB-INF/tld/mmj-agy.tld</taglib-location>
    </taglib>
    <taglib>
      <taglib-uri>/mmj-app</taglib-uri>
      <taglib-location>/WEB-INF/tld/mmj-app.tld</taglib-location>
    </taglib>
    <jsp-property-group>
      <url-pattern>*.jsp</url-pattern>
      <page-encoding>UTF-8</page-encoding>
    </jsp-property-group>
  </jsp-config>
</web-app>